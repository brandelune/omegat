<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
"../../../docbook-xml-4.5/docbookx.dtd" [
<!ENTITY % manualvariables SYSTEM "manualvariables.mod">
%manualvariables;
]>
<chapter id="installing.and.running.omegat">
  <title id="installing.and.running.omegat.title">Installing and Running
  OmegaT</title>

  <para>OmegaT &vernb; requires a &javaversionlong; (JRE) to run.</para>

  <para>OmegaT packages are available both in versions bundled with Java, and
  versions without it. Packages without Java rely on a &javaversionlong;
  installed systemwide.</para>

  <para>OmegaT 5.8.0 and later also support Java 11 Runtime Environment on any
  platforms.</para>

  <para>Due to licensing considerations, the OmegaT team recommends the Java
  runtime Eclipse Temurin provided by the &preferedopenjdk;, but any Java 8
  compatible runtime environment should work.</para>

  <para>OmegaT comes in two editions:</para>

  <variablelist>
	<varlistentry>
	  <term>Standard</term>
	  <listitem><para>This edition is suitable for everyday use.</para></listitem>
	</varlistentry>
	<varlistentry>
	  <term>Developer</term>
	  <listitem><para>This edition is more suitable for testing new features.</para></listitem>
	</varlistentry>
  </variablelist>

  <para>The files are downloadable directly from <ulink
  url="https://omegat.org/download">omegat.org</ulink>. All the packages listed
  below are available from that site.</para>

  <section id="installing.omegat">
    <title id="installing.omegat.title">Installing OmegaT</title>

    <section id="installing.omegat.windows">
      <title id="installing.omegat.windows.title">Windows</title>

      <section id="installing.omegat.windows.download.the.package">
        <title
        id="installing.omegat.windows.download.the.package.title">Download the
        package</title>

        <para>Do you want OmegaT bundled with Java?</para>

  <variablelist>
	<varlistentry>
	  <term>No</term>
	  <listitem><para>download
	  <filename>OmegaT_&vernb;_Windows_without_JRE.exe</filename></para></listitem>
	</varlistentry>
	<varlistentry>
	  <term>Yes / I'm not sure</term>
	  <listitem><para>download
	  <filename>OmegaT_&vernb;_Windows_64_Signed.exe</filename></para></listitem>
	</varlistentry>
  </variablelist>
		
		
            <note>
              <para>If you have a 32-bit system (most likely on a pre-2010
              machine), you should download
              <filename>OmegaT_&vernb;_Windows_Signed.exe</filename>
              instead.</para>
            </note>
      </section>

      <section id="installing.omegat.windows.install.the.package">
        <title
        id="installing.omegat.windows.install.the.package.title">Install
        OmegaT</title>

        <para>Double-click on the package you downloaded.</para>

        <para>You can choose the language used during the installation and the
        language used by OmegaT. You can also change this later by editing
        <filename>OmegaT.l4J.ini</filename>.</para>
      </section>
    </section>

    <section id="installing.omegat.linux.intel">
      <title id="installing.omegat.linux.intel.title">Linux (Intel)</title>

      <section id="installing.omegat.linux.intel.download.the.package">
        <title
        id="installing.omegat.linux.intel.download.the.package.title">Check
        for an available package</title>

        <para>Check your distribution's official or, if applicable,
        user-provided package repositories for an up-to-date OmegaT package.
        If there is one, use your standard package manager to install
        it.</para>

        <para>If your distribution does not have an OmegaT package, or only an
        outdated one, follow the instructions in the following sections to
        install it.</para>
      </section>

      <section>
        <title>Download the package</title>

        <para>Do you want OmegaT bundled with Java?</para>

     <variablelist>
	<varlistentry>
	  <term>No</term>
	  <listitem><para>download
	  <filename>OmegaT_&vernb;_Without_JRE.zip</filename></para></listitem>
	</varlistentry>
	<varlistentry>
	  <term>Yes / I'm not sure</term>
	  <listitem><para>download
	  <filename>OmegaT_&vernb;_Linux_64.tar.bz2</filename></para></listitem>
	</varlistentry>
  </variablelist>

            <note>
              <para>If you have a 32-bit system (most likely on a pre-2010
              machine), you should download
              <filename>OmegaT_&vernb;_Linux.tar.bz2</filename>
              instead.</para>
            </note>

            <para>This package is bundled with &bundledjavaversion;. This JRE
            will not interfere with other Java implementations that may
            already be installed on your system.</para>
      </section>

      <section id="installing.omegat.linux.intel.install.the.package">
        <title
        id="installing.omegat.linux.intel.install.the.package.title">Install
        OmegaT</title>

        <para>Instructions for the command line are provided below.</para>

        <orderedlist>
          <listitem>
            <para>Unpack/untar the file you downloaded using the command
            appropriate to the file you downloaded:</para>

            <programlisting>$ unzip OmegaT_&vernb;_Without_JRE.zip</programlisting>

            <para>(you may need to install the <filename>unzip</filename>
            package first) or</para>

            <programlisting>$ tar xf OmegaT_&vernb;_Linux_64.tar.bz2</programlisting>

            <para>This will create a new folder in the current folder. The new
            folder will be named after the package you downloaded, and contain
            all the files needed to run OmegaT.</para>
          </listitem>

          <listitem>
            <para>Navigate to the newly created folder and run the
            <filename>linux-install.sh</filename> script found there.</para>

            <programlisting>$ cd OmegaT_&vernb;_<parameter>&lt;package_you_downloaded&gt;</parameter>
$ ./linux-install.sh</programlisting>

            <para>Running the script will require you to enter your
            <filename>sudo</filename> password.</para>

            <para>The script checks for an existing installation of the same
            OmegaT version in <filename>/opt/omegat/</filename>. If there
            isn't one, it installs the program in
            <filename>/opt/omegat/OmegaT_&vernb;</filename> and sets it as the
            default version (in
            <filename>/opt/omegat/OmegaT-default</filename>). The installation
            script is available <ulink
            url="https://sourceforge.net/p/omegat/svn/HEAD/tree/trunk/release/linux-specific/linux-install.sh">here</ulink>,
            for your perusal before use.</para>

            <para>After the installation is complete, you can safely delete
            the <filename>.zip</filename> or <filename>.tar.bz2</filename>
            file.</para>
          </listitem>
        </orderedlist>
      </section>

      <section id="installing.omegat.linux.intel.add..to.your.menus.or.panels">
        <title
        id="installing.omegat.linux.intel.add.to.your.menus.or.panels.title">Add
        OmegaT to your menus (KDE) or panels (Gnome)</title>

        <section id="installing.omegat.linux.intel.add..to.your.menus.or.panels.kde">
          <title
          id="installing.omegat.linux.intel.add.to.your.menus.or.panels.kde.title">KDE
          4</title>

          <para>You can add OmegaT to your menus as follows:</para>

          <itemizedlist>
            <listitem>
              <para>Press <keycombo>
                  <keycap>Alt</keycap>
                  <keycap>F2</keycap>
                </keycombo> to show KRunner. Type
              <command>kmenuedit+enter</command> to run the command. The
              KMenuEditor appears. In KMenuEditor select <guilabel>File &gt;
              New Item.</guilabel></para>
            </listitem>

            <listitem>
              <para>After selecting a suitable menu, add a submenu/item with
              <guilabel>File &gt; New</guilabel> Submenu and <guilabel>File
              &gt; New Item</guilabel>. Enter OmegaT as the name of the new
              item.</para>
            </listitem>

            <listitem>
              <para>In the <emphasis role="bold">Command</emphasis> field, use
              the browse button to select the OmegaT launch script (copied to
              <filename>/usr/local/bin/omegat</filename> by the installation
              script. Alternatively can also choose the
              <filename>omegat</filename> file in
              <filename><literal>opt/omegat/OmegaT-default</literal></filename>
              or in <filename>opt/omegat/OmegaT_&vernb;)</filename>. Click
              <emphasis role="bold">OK</emphasis> to confirm.</para>
            </listitem>

            <listitem>
              <para>Click on the icon button (to the right of the
              Name/Description/Comment fields)</para>
            </listitem>

            <listitem>
              <para>Other Icons - Browse, and navigate to the
              <filename>images</filename> folder in the OmegaT application
              folder. Select the <filename>OmegaT.png</filename> icon.</para>
            </listitem>

            <listitem>
              <para>Finally, save the changes with <guilabel>File &gt;
              Save.</guilabel></para>
            </listitem>
          </itemizedlist>
        </section>

        <section id="installing.omegat.linux.intel.add.to.your.menus.or.panels.gnome">
          <title
          id="installing.omegat.linux.intel.add.to.your.menus.or.panels.gnome.title">GNOME</title>

          <para>You can add OmegaT to your menus as follows:</para>

          <itemizedlist>
            <listitem>
              <para>Right-click on the panel - <guilabel>Add New
              Launcher</guilabel>.</para>
            </listitem>

            <listitem>
              <para>Enter "OmegaT" in the <guilabel>Name</guilabel> field; in
              the <guilabel>Command</guilabel> field, use the browse button to
              select the OmegaT launch script (copied to
              <filename>/usr/local/bin/omegat</filename> by the installation
              script. Alternatively can also choose the
              <filename>omegat</filename> file in
              <filename><literal>opt/omegat/OmegaT-default</literal></filename>
              or in <filename>opt/omegat/OmegaT_&vernb;)</filename>. Click
              <emphasis role="bold">OK</emphasis> to confirm.</para>
            </listitem>

            <listitem>
              <para>Click on the icon button, then hit
              <guilabel>Browse...</guilabel> and navigate to the
              <filename>images</filename> folder in the OmegaT application
              folder. Select the <filename>OmegaT.png</filename> icon. GNOME
              may fail to display the icon files in the available formats and
              initially appear to expect an SVG file, but if the folder is
              selected, the files should appear and
              <filename>OmegaT.png</filename> can be selected.</para>
            </listitem>
          </itemizedlist>
        </section>
      </section>
    </section>

    <section id="Installing.omegat.macos">
      <title id="Installing.omegat.macos.title">macOS</title>

      <section id="installing.omegat.macos.download.the.package">
        <title
        id="installing.omegat.macos.download.the.package.title">Download the
        package</title>

        <para>The macOS package contains &bundledjavaversion;</para>

        <para>Download
        <filename>OmegaT_&vernb;_Mac_Notarized.zip</filename>.</para>
      </section>

      <section id="installing.omegat.macos.install.the.package">
        <title id="installing.omegat.macos.install.the.package.title">Install
        OmegaT</title>

        <para>Double click on
        <filename>OmegaT_&vernb;_Mac_Notarized.zip</filename> to unpack it.
        This creates a folder called <filename>OmegaT</filename>. The folder
        contains two files: <filename>index.html</filename> (the manual index)
        and <filename>OmegaT.app</filename> (the application). Copy the folder
        to a suitable location (e.g.
        <filename>Applications</filename>).</para>

        <para>Once you have done this, you can delete the
        <filename>OmegaT_&vernb;_Mac_Notarized.zip</filename> file as it is no
        longer needed.</para>
      </section>

      <section id="installing.omegat.macos.add.to.the.dock">
        <title id="installing.omegat.macos.add.to.the.dock.title">Add OmegaT
        to the Dock</title>

        <para>Drag and drop <filename>OmegaT.app</filename> onto the
        Dock.</para>
      </section>
    </section>

    <section id="installing.omegat.other.systems">
      <title id="installing.omegat.other.systems.title">Other systems</title>

      <para>This information applies to systems such as Solaris SPARC/x86/x64,
      Linux x64/PowerPC, Windows x64.</para>

      <para>For such systems, only the generic non-bundled OmegaT version is
      offered. Make sure that your system has a Java version compatible with
      &javaversionlong;.</para>

      <section id="installing.omegat.other.systems.download.the.package">
        <title
        id="installing.omegat.other.systems.download.the.package.title">The
        OmegaT generic package</title>

        <para>Download <filename>OmegaT_&vernb;_Without_JRE.zip</filename>.
        This package can be used on any system where a &javaversionlong; is
        installed, including Windows, Linux or macOS.</para>

        <para>The Eclipse Foundation provides OpenJDK Runtime Environments
        JREs for many systems at <ulink
        url="https://adoptium.net/temurin"/>.</para>

        <para>IBM provides JREs for Linux PowerPC at <ulink
        url="https://developer.ibm.com/languages/java/semeru-runtimes/downloads/?license=IBM"/>.</para>

        <para>Follow the installation instructions of the package you
        need.</para>
      </section>

      <section id="installing.omegat.other.systems.install.the.package">
        <title
        id="installing.omegat.other.systems.install.the.package.title">Install
        OmegaT</title>

        <para>To install OmegaT, simply unpack the
        <filename>OmegaT_&vernb;_Without_JRE.zip</filename> file. This creates
        an <filename>OmegaT_&vernb;_Without_JRE/</filename> folder in the
        download folder with all the files necessary to run OmegaT.</para>
      </section>

      <section id="installing.omegat.other.systems.install.convenient.shortcuts">
        <title
        id="installing.omegat.other.systems.install.convenient.shortcuts.title">Install
        convenient shortcuts</title>

        <para>Follow your system's instructions to install OmegaT shortcuts in
        convenient places of your choosing.</para>
      </section>
    </section>
  </section>

  <section id="running.omegat">
    <title id="running.omegat.title">Running OmegaT</title>

    <section id="running.omegat.on.windows">
      <title id="running.omegat.on.windows.title">Windows</title>

      <para>The simplest way to launch OmegaT is to execute the
      <filename>OmegaT.exe</filename> program. The options for the program
      start-up will be read from the <filename>OmegaT.l4J.ini</filename> file,
      which resides in the same folder as the exe file and which you can edit
      to reflect your setup. The following example for the INI file reserves 1
      GB of memory, requests French as the user language and Canada as the
      country:</para>

      <programlisting># OmegaT.exe runtime configuration
# To use a parameter, remove the '#' before the '-'
# Memory
-Xmx1024M
# Language
-Duser.language=FR
# Country
-Duser.country=CA</programlisting>


      <para>Advice: if OmegaT works slowly in Remote Desktop sessions under
      Windows, you may use this option:</para>

      <programlisting>-Dsun.java2d.noddraw=false</programlisting>
    </section>

    <section id="running.omegat.on.linux">
      <title id="running.omegat.on.linux.title">Linux</title>

      <para>You can launch OmegaT from the command line with a script that
      includes start-up options. See <link
      endterm="launch.with.command.line.title"
      linkend="launch.with.command.line"/> for details.</para>

      <para>You can also click on <filename>OmegaT.jar</filename> to launch it
      directly if the <filename>.jar</filename> extension is associated to the
      system Java launcher.</para>

      <para>The package also provides a <filename>omegat.kaptn</filename>
      Kaptain script, which KDE users might find useful, as well as an
      <filename>OmegaT</filename> bash script that automatically launches the
      appropriate <application>java</application> command to run
      OmegaT.</para>
    </section>

    <section id="running.omegat.on.macos">
      <title id="running.omegat.on.macos.title">macOS</title>

      <para>Double-click on <filename>OmegaT.app</filename> or click on its
      location in the Dock.</para>

      <para>To launch multiple instances of <filename>OmegaT.app</filename>,
      double-click the file <emphasis>OmegaT</emphasis> located in
      <filename>OmegaT.app/Contents/MacOS/</filename>.</para>

      <para>Use the <filename>OmegaT.jar</filename> file located in
      <filename>OmegaT.app/Contents/MacOS/Java/</filename> to launch OmegaT
      from the command line. See <link
      endterm="launch.with.command.line.title"
      linkend="launch.with.command.line"/> for details.</para>

      <para>You can modify the behavior of OmegaT.app by editing the
      <filename>Configuration.properties</filename> (OmegaT configuration) as
      well as the <filename>Info.plist</filename> (Java configuration) files
      located inside the OmegaT.app package.</para>

      <para>To access the configuration files, right-click on
      <filename>OmegaT.app</filename> and select "Show Package
      Contents".</para>

      <para><filename>Configuration.properties</filename> is located in
      <filename>Contents/Resources/</filename>.
      <filename>Info.plist</filename> is located in
      <filename>Contents/</filename>.</para>

      <para>Right-click on the file you want to modify and select your text
      editor of choice or <command>cd</command> there directly from the
      command line and open the files from the command line.</para>

      <para>OmegaT's configuration is changed by modifying
      <filename>Configuration.properties</filename>.</para>

      <para>For predefined options, remove the <literal>#</literal> before a
      parameter to enable it. For example, <literal>user.language=ja</literal>
      (without the <literal>#</literal>) will launch OmegaT with the user
      interface in Japanese.</para>

      <para>The Java configuration is changed by modifying
      <filename>Info.plist</filename>.</para>

      <para>For example, to change the amount of memory available uncomment
      the line <literal>&lt;!-- &lt;string&gt;-Xmx6g&lt;/string&gt;
      --&gt;</literal> by removing the <literal>&lt;!--</literal> and
      <literal>--&gt;</literal>. This will launch OmegaT with 6 GB of memory;
      change the <literal>6g</literal> to the desired amount.</para>

      <section id="running.omegat.on.macos.goodies">
        <title id="running.omegat.on.macos.goodies.title">macOS
        Services</title>

        <para><filename>OmegaT.app</filename> can make use of macOS Services.
        You can also use AppleScript, Automator or Shortcuts to create
        Services or scripts that will automate frequent actions.</para>
      </section>
    </section>

    <section id="running.omegat.on.other.systems">
      <title id="running.omegat.on.other.systems.title">Other systems</title>

      <para>Methods vary from one system to another, but in general, once
      OmegaT is installed, you can launch it directly from the command line.
      See <link endterm="launch.with.command.line.title"
      linkend="launch.with.command.line"/> for details. You can create a
      script that includes the desired command line launch parameters. If
      <filename>.jar</filename> files are properly associated with
      &javaversionlong; and your PATH settings are correct, you can also
      simply click (or double-click) on <filename>OmegaT.jar</filename> to
      launch it directly. Consult the documentation for your system for more
      information.</para>
    </section>
  </section>

  <section id="update.and.delete.omegat">
    <title id="update.and.delete.omegat.title">Upgrading and deleting
    OmegaT</title>

    <para>OmegaT can tell you when a new version is available. See <link
    endterm="dialogs.preferences.updates.title"
    linkend="dialogs.preferences.updates"/> in the <link
    endterm="dialogs.preferences.title" linkend="dialogs.preferences"/> dialog
    for details.</para>

    <para>The changes between your version and the current version are
    documented in the development site's <ulink
    url="https://sourceforge.net/p/omegat/code/ci/master/tree/release/changes.txt">change.txt</ulink>
    file.</para>

    <note>
      <para>If you decide to install a new version, keep the following in
      mind:</para>

      <itemizedlist>
        <listitem>
          <para>OmegaT's preferences are stored in the configuration folder
          and will <emphasis>not</emphasis> be modified by the new version.
          See <link endterm="configuration.folder.title"
          linkend="configuration.folder"/> for details.</para>
        </listitem>

        <listitem>
          <para>Projects that you have created in the past or are currently
          using will <emphasis>not</emphasis> be modified or deleted. OmegaT
          projects are <emphasis>not</emphasis> stored inside OmegaT. They are
          separate objects that have no physical connection to the OmegaT
          application itself.</para>
        </listitem>

        <listitem>
          <para>Parameter files that are included in the downloaded OmegaT
          package (especially the <filename>OmegaT.l4J.ini</filename> for
          <link endterm="running.omegat.on.windows.title"
          linkend="running.omegat.on.windows"/> and the
          <filename>Configuration.properties</filename> and
          <filename>Info.plist</filename> files for <link
          endterm="running.omegat.on.macos.title"
          linkend="running.omegat.on.macos"/> packages) might be overwritten
          or deleted, so you may want to create a backup before upgrading, if
          you have been using these files to modify OmegaT's launch
          parameters.</para>
        </listitem>

        <listitem>
          <para>The <filename>plugins</filename> and
          <filename>scripts</filename> folders might be overwritten, so you
          may want to create a backup before upgrading.</para>
        </listitem>
      </itemizedlist>
    </note>

    <section id="update.and.delete.omegat.over.existing.package">
      <title id="update.and.delete.omegat.over.existing.package.title">Install
      over an existing version</title>

      <para>To do this, simply select the same installation folder as the
      existing installation when installing the new version. The "old" version
      of OmegaT will be overwritten, but settings made from the OmegaT
      interface will be retained in the various configurations folders (see
      above).</para>
    </section>

    <section id="update.and.delete.omegat.along.existing.package">
      <title
      id="update.and.delete.omegat.along.existing.package.title">Install
      alongside an existing version</title>

      <para>This will enable you to keep any number of versions side-by-side,
      which you may wish to do until you feel comfortable with the new
      version.</para>

      <para>All the parameters located in the <link
      endterm="configuration.folder.title" linkend="configuration.folder"/>
      will be shared unless you specify a  different configuration folder with the <literal>--config-dir=&lt;path&gt;</literal> option from the <link endterm="launch.with.command.line.omegat.parameters.title" linkend="launch.with.command.line.omegat.parameters"></link> on the command line . All the parameters located in a <link
      endterm="project.folder.title" linkend="project.folder"/> will apply to
      that project regardless of which version of OmegaT opens it.</para>
    </section>

    <section id="update.and.delete.omegat.delete">
      <title id="update.and.delete.omegat.delete.title">Delete OmegaT</title>

      <para>Use your operating system's standard procedure to remove OmegaT.
      If you want to remove OmegaT completely, you will also have to delete
      the configuration folder.</para>

      <para>If you performed a manual installation on Linux, you will have to
      manually delete the OmegaT folders in <filename>opt/</filename>, as well
      as the symlinks placed in <filename>/usr/local/bin/</filename> by the
      installation script.</para>
    </section>
  </section>

  <section id="build.omegat.from.source">
    <title id="build.omegat.from.source.title">Building OmegaT from
    source</title>

    <para>The sources of the current version can be retrieved with a Git
    client from the <ulink url="https://git.code.sf.net/p/omegat/code"/>
    repository or directly from <ulink
    url="https://sourceforge.net/p/omegat/code/ci/master/tarball?path=">SourceForge</ulink>.</para>

    <para>Once the code is downloaded, open a terminal in the source folder (<filename>/omegat/src</filename>) and type:</para>

    <programlisting>./gradlew assembleDist</programlisting>

    <para>This will create a full distribution of OmegaT in the
    <filename>build/distributions/</filename> folder, where you will find a
    zip containing everything needed to run OmegaT.</para>

    <para>You can also run the application directly with the following
    command:</para>

    <programlisting>./gradlew run</programlisting>

    <para>You can get a list of all available tasks by typing:</para>

    <programlisting>./gradlew tasks</programlisting>

    <para>Detailed instructions on building OmegaT are in the docs_devel <ulink
    url="https://sourceforge.net/p/omegat/svn/HEAD/tree/trunk/docs_devel/README.txt">README.txt</ulink> file.</para>
  </section>
</chapter>
